**XSS攻击**：这是一种利用网页代码的安全漏洞攻击，类似于sql注入，它是通过将代码注入到网页上，其他的一些使用者浏览该网页的时候就会造成影响。XSS攻击一般分为三种，反射型、存储型、基于dom。

反射型比较简单，就是简单的把用户输入的数据反射给浏览器，这种攻击方式往往需要攻击者诱导用户点击一个恶意链接或者提交一个表单就会造成一次xss攻击。

存储型则是会把用户的输入的数据存储在服务器端，当浏览器请求数据时，脚本从服务器上传回并执行，这种XSS攻击具有很强的稳定性。这种方式比较常见的场景就是一个攻击者在社区或者论坛上写下一篇包含代码攻击的文章或者评论，发表之后，所有访问这篇文章或者评论的用户，都会在他们浏览器中执行这段恶意代码。

基于DOM的xss攻击是指通过恶意脚本修改页面的DOM结构，是纯粹发生在客户端的攻击。

*如何防御？*

最普遍的做法是转义输入输出的内容，对于引号，尖括号，斜杠进行转义。对于富文本来说的话，不能通过上面的办法来转义所有字符，因为这样会把需要的格式也过滤掉。这种情况可以采用黑白名单过滤的方式





CSP内容安全策略：

它是一个额外的安全层，用于检测并削弱某些特定类型的攻击，包括跨站脚本攻击XSS和数据注入攻击。无论是数据盗取还是网站内容讴歌污染，散发恶意软件，这些攻击都是主要的手段。

可以通过CSP来尽量减少XSS攻击，CSP本质上也是简历白名单规定了浏览器只能执行特定来源的代码。

通常可以通过HTTP Header中的Content-Security-Policy来开启CSP。

default-src 'self''   ：只允许加载本站资源

img-src https://*   : 只允许加载HTTPS协议图片







CSRF 跨站请求伪造：是利用用户在当前已经登录的web应用程序上执行非本意操作的攻击方法，XSS利用的是用户对指定网站的信任，CSRF利用的是网站对用户网页浏览器的信任。其实就是浏览器自动发送cokkie的机制。

`如何攻击？`

攻击者一般会在钓鱼网站中加入一个图片，图片的地址就是评论接口，如果接口是post提交的，就相对麻烦一点，需要用表单来提交接口。

cookie的发送机制：当向HTTP服务器请求某个URL时浏览器将该URL与客户主机中存储的所有Cookie比较，如果发现域名相匹配Cookie，则匹配Cookie中包含名字或者值的那一行将被包含在HTTP请求头中，以保证依赖于Cookie的功能得以实现。

虽然一般情况下浏览器的跨域限制会保护我们的cookie，但是img的src是不受跨域限制的，所以通过src的请求链接会自动携带在请求头中。

`如何防范？`

- GET请求不能对数据进行修改
- 不让第三方网站访问到用户Cookie
- 阻止第三方网站的请求接口
- 请求时附带验证信息，比如验证码或者tokne
- 对cookie设置SameSite属性，该属性设置Cookie不随着跨域请求发送，该属性课很大程度减少CSRF的攻击，但不是所有浏览器都兼容
- 验证Referer  对于需要防范的CSRF请求，我们可以验证Referer来判断该请求是否为第三方网站发起的。HTTP referer是HTTP请求头部的一部分，浏览器向web服务器请求时一般都会自动带上Referer以告诉服务器我是从哪个页面来的
- 使用验证码，这被认为是对抗CSRF攻击最简洁且最有效的防御方法、CSRF攻击往往是在用户不知情的情况下构造了网络请求。而验证码会强调用户必须与应用进行交互，才能完成最终请求、通常情况下，验证码可以很好的遏制CSRF攻击。但不是所有的网站都能加验证码的，所以这种方式也只能作为一种辅助手段
- TOKEN  服务器下发一个随机TOKEN，每次发起请求的时候，就讲TOKEN携带上，服务器验证TOKEN是否有效，客户端讲TOKEN存在cookie验证，

